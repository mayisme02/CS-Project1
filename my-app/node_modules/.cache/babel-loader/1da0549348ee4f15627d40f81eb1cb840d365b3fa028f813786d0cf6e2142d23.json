{"ast":null,"code":"var _jsxFileName = \"C:\\\\CS-Project1\\\\my-app\\\\src\\\\components\\\\Register.js\",\n  _s = $RefreshSig$();\nimport { useRef } from \"react\";\nimport { auth, db } from \"../firebase/firebase.js\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { createUserWithEmailAndPassword, getAuth, getRedirectResult, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst provider = new GoogleAuthProvider();\n// ใช้ GoogleAuthProvider เพื่อรองรับการลงทะเบียนด้วย Google\n\nconst Register = () => {\n  _s();\n  const usernameRef = useRef();\n  const emailRef = useRef();\n  const passwordRef = useRef();\n  const telephoneRef = useRef();\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const username = usernameRef.current.value;\n    const email = emailRef.current.value;\n    const password = passwordRef.current.value;\n    const telephone = telephoneRef.current.value;\n    if (password.length < 6) {\n      alert(\"Password ต้องมีอย่างน้อย 6 ตัวอักษร\");\n      return; // หยุดการทำงานถ้ารหัสผ่านสั้นเกินไป\n    }\n    try {\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n\n      // เก็บ username กับ telephone ใน Firestore โดยใช้ user.uid เป็น id\n      await setDoc(doc(db, \"users\", user.uid), {\n        username: username,\n        telephone: telephone,\n        email: email\n      });\n      console.log(\"User registered and data saved:\", user.uid);\n    } catch (error) {\n      console.error(\"Registration error:\", error);\n    }\n  };\n\n  // ฟังก์ชัน Login ด้วย Google\n  const handleGoogleLogin = async () => {\n    try {\n      var _userDocRef$get;\n      const result = await signInWithPopup(auth, provider);\n      const user = result.user;\n\n      // เช็คว่า user นี้มีข้อมูลใน Firestore หรือยัง\n      const userDocRef = doc(db, \"users\", user.uid);\n      const userDoc = await ((_userDocRef$get = userDocRef.get) === null || _userDocRef$get === void 0 ? void 0 : _userDocRef$get.call(userDocRef));\n      if (!userDoc || !userDoc.exists()) {\n        // ถ้ายังไม่มีข้อมูลให้เพิ่ม user ลง Firestore\n        await setDoc(userDocRef, {\n          username: user.displayName || \"No Name\",\n          email: user.email,\n          telephone: \"\"\n        });\n      }\n      console.log(\"Google login successful, user:\", user.uid);\n    } catch (error) {\n      console.error(\"Google login error:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0E25\\u0E07\\u0E17\\u0E30\\u0E40\\u0E1A\\u0E35\\u0E22\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"Username:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          name: \"username\",\n          required: true,\n          ref: usernameRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          name: \"email\",\n          required: true,\n          ref: emailRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          required: true,\n          ref: passwordRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"telephone\",\n          children: \"Telephone:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"tel\",\n          id: \"telephone\",\n          name: \"telephone\",\n          required: true,\n          ref: telephoneRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleGoogleLogin,\n      style: {\n        marginTop: \"20px\"\n      },\n      children: \"Login with Google\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Register, \"zD7IkVyLN37qNMLXRCWkjb4YCIk=\");\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["useRef","auth","db","doc","setDoc","createUserWithEmailAndPassword","getAuth","getRedirectResult","GoogleAuthProvider","signInWithPopup","jsxDEV","_jsxDEV","Fragment","_Fragment","provider","Register","_s","usernameRef","emailRef","passwordRef","telephoneRef","handleSubmit","event","preventDefault","username","current","value","email","password","telephone","length","alert","userCredential","user","uid","console","log","error","handleGoogleLogin","_userDocRef$get","result","userDocRef","userDoc","get","call","exists","displayName","children","onSubmit","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","id","name","required","ref","onClick","style","marginTop","_c","$RefreshReg$"],"sources":["C:/CS-Project1/my-app/src/components/Register.js"],"sourcesContent":["import { useRef } from \"react\";\r\nimport { auth, db } from \"../firebase/firebase.js\"; \r\nimport { doc, setDoc } from \"firebase/firestore\";\r\nimport { createUserWithEmailAndPassword, getAuth, getRedirectResult, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\n\r\n\r\nconst provider = new GoogleAuthProvider();\r\n// ใช้ GoogleAuthProvider เพื่อรองรับการลงทะเบียนด้วย Google\r\n\r\nconst Register = () => {\r\n  const usernameRef = useRef();\r\n  const emailRef = useRef();\r\n  const passwordRef = useRef();\r\n  const telephoneRef = useRef();\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const username = usernameRef.current.value;\r\n    const email = emailRef.current.value;\r\n    const password = passwordRef.current.value;\r\n    const telephone = telephoneRef.current.value;\r\n\r\n    if (password.length < 6) {\r\n    alert(\"Password ต้องมีอย่างน้อย 6 ตัวอักษร\");\r\n    return; // หยุดการทำงานถ้ารหัสผ่านสั้นเกินไป\r\n  }\r\n\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n\r\n      // เก็บ username กับ telephone ใน Firestore โดยใช้ user.uid เป็น id\r\n      await setDoc(doc(db, \"users\", user.uid), {\r\n        username: username,\r\n        telephone: telephone,\r\n        email: email,\r\n      });\r\n\r\n      console.log(\"User registered and data saved:\", user.uid);\r\n\r\n    } catch (error) {\r\n      console.error(\"Registration error:\", error);\r\n    }\r\n  };\r\n\r\n   // ฟังก์ชัน Login ด้วย Google\r\n  const handleGoogleLogin = async () => {\r\n    try {\r\n      const result = await signInWithPopup(auth, provider);\r\n      const user = result.user;\r\n\r\n      // เช็คว่า user นี้มีข้อมูลใน Firestore หรือยัง\r\n      const userDocRef = doc(db, \"users\", user.uid);\r\n      const userDoc = await userDocRef.get?.();\r\n\r\n      if (!userDoc || !userDoc.exists()) {\r\n        // ถ้ายังไม่มีข้อมูลให้เพิ่ม user ลง Firestore\r\n        await setDoc(userDocRef, {\r\n          username: user.displayName || \"No Name\",\r\n          email: user.email,\r\n          telephone: \"\",\r\n        });\r\n      }\r\n\r\n      console.log(\"Google login successful, user:\", user.uid);\r\n    } catch (error) {\r\n      console.error(\"Google login error:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={handleSubmit} className=\"form-container\">\r\n        <h2>ลงทะเบียน</h2>\r\n        <div>\r\n          <label htmlFor=\"username\">Username:</label>\r\n          <input type=\"text\" id=\"username\" name=\"username\" required ref={usernameRef} />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"email\">Email:</label>\r\n          <input type=\"email\" id=\"email\" name=\"email\" required ref={emailRef} />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"password\">Password:</label>\r\n          <input type=\"password\" id=\"password\" name=\"password\" required ref={passwordRef} />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"telephone\">Telephone:</label>\r\n          <input type=\"tel\" id=\"telephone\" name=\"telephone\" required ref={telephoneRef} />\r\n        </div>\r\n        <button type=\"submit\">Sign Up</button>\r\n      </form>\r\n\r\n      <hr />\r\n\r\n      <button onClick={handleGoogleLogin} style={{marginTop: \"20px\"}}>\r\n        Login with Google\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;"],"mappings":";;AAAA,SAASA,MAAM,QAAQ,OAAO;AAC9B,SAASC,IAAI,EAAEC,EAAE,QAAQ,yBAAyB;AAClD,SAASC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,SAASC,8BAA8B,EAAEC,OAAO,EAAEC,iBAAiB,EAAEC,kBAAkB,EAAEC,eAAe,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAGhI,MAAMC,QAAQ,GAAG,IAAIN,kBAAkB,CAAC,CAAC;AACzC;;AAEA,MAAMO,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAMC,WAAW,GAAGjB,MAAM,CAAC,CAAC;EAC5B,MAAMkB,QAAQ,GAAGlB,MAAM,CAAC,CAAC;EACzB,MAAMmB,WAAW,GAAGnB,MAAM,CAAC,CAAC;EAC5B,MAAMoB,YAAY,GAAGpB,MAAM,CAAC,CAAC;EAE7B,MAAMqB,YAAY,GAAG,MAAOC,KAAK,IAAK;IACpCA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,MAAMC,QAAQ,GAAGP,WAAW,CAACQ,OAAO,CAACC,KAAK;IAC1C,MAAMC,KAAK,GAAGT,QAAQ,CAACO,OAAO,CAACC,KAAK;IACpC,MAAME,QAAQ,GAAGT,WAAW,CAACM,OAAO,CAACC,KAAK;IAC1C,MAAMG,SAAS,GAAGT,YAAY,CAACK,OAAO,CAACC,KAAK;IAE5C,IAAIE,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE;MACzBC,KAAK,CAAC,qCAAqC,CAAC;MAC5C,OAAO,CAAC;IACV;IAEE,IAAI;MACF,MAAMC,cAAc,GAAG,MAAM3B,8BAA8B,CAACJ,IAAI,EAAE0B,KAAK,EAAEC,QAAQ,CAAC;MAClF,MAAMK,IAAI,GAAGD,cAAc,CAACC,IAAI;;MAEhC;MACA,MAAM7B,MAAM,CAACD,GAAG,CAACD,EAAE,EAAE,OAAO,EAAE+B,IAAI,CAACC,GAAG,CAAC,EAAE;QACvCV,QAAQ,EAAEA,QAAQ;QAClBK,SAAS,EAAEA,SAAS;QACpBF,KAAK,EAAEA;MACT,CAAC,CAAC;MAEFQ,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEH,IAAI,CAACC,GAAG,CAAC;IAE1D,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C;EACF,CAAC;;EAEA;EACD,MAAMC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI;MAAA,IAAAC,eAAA;MACF,MAAMC,MAAM,GAAG,MAAM/B,eAAe,CAACR,IAAI,EAAEa,QAAQ,CAAC;MACpD,MAAMmB,IAAI,GAAGO,MAAM,CAACP,IAAI;;MAExB;MACA,MAAMQ,UAAU,GAAGtC,GAAG,CAACD,EAAE,EAAE,OAAO,EAAE+B,IAAI,CAACC,GAAG,CAAC;MAC7C,MAAMQ,OAAO,GAAG,QAAAH,eAAA,GAAME,UAAU,CAACE,GAAG,cAAAJ,eAAA,uBAAdA,eAAA,CAAAK,IAAA,CAAAH,UAAiB,CAAC;MAExC,IAAI,CAACC,OAAO,IAAI,CAACA,OAAO,CAACG,MAAM,CAAC,CAAC,EAAE;QACjC;QACA,MAAMzC,MAAM,CAACqC,UAAU,EAAE;UACvBjB,QAAQ,EAAES,IAAI,CAACa,WAAW,IAAI,SAAS;UACvCnB,KAAK,EAAEM,IAAI,CAACN,KAAK;UACjBE,SAAS,EAAE;QACb,CAAC,CAAC;MACJ;MAEAM,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEH,IAAI,CAACC,GAAG,CAAC;IACzD,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C;EACF,CAAC;EAED,oBACE1B,OAAA,CAAAE,SAAA;IAAAkC,QAAA,gBACEpC,OAAA;MAAMqC,QAAQ,EAAE3B,YAAa;MAAC4B,SAAS,EAAC,gBAAgB;MAAAF,QAAA,gBACtDpC,OAAA;QAAAoC,QAAA,EAAI;MAAS;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClB1C,OAAA;QAAAoC,QAAA,gBACEpC,OAAA;UAAO2C,OAAO,EAAC,UAAU;UAAAP,QAAA,EAAC;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC3C1C,OAAA;UAAO4C,IAAI,EAAC,MAAM;UAACC,EAAE,EAAC,UAAU;UAACC,IAAI,EAAC,UAAU;UAACC,QAAQ;UAACC,GAAG,EAAE1C;QAAY;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3E,CAAC,eACN1C,OAAA;QAAAoC,QAAA,gBACEpC,OAAA;UAAO2C,OAAO,EAAC,OAAO;UAAAP,QAAA,EAAC;QAAM;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACrC1C,OAAA;UAAO4C,IAAI,EAAC,OAAO;UAACC,EAAE,EAAC,OAAO;UAACC,IAAI,EAAC,OAAO;UAACC,QAAQ;UAACC,GAAG,EAAEzC;QAAS;UAAAgC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnE,CAAC,eACN1C,OAAA;QAAAoC,QAAA,gBACEpC,OAAA;UAAO2C,OAAO,EAAC,UAAU;UAAAP,QAAA,EAAC;QAAS;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC3C1C,OAAA;UAAO4C,IAAI,EAAC,UAAU;UAACC,EAAE,EAAC,UAAU;UAACC,IAAI,EAAC,UAAU;UAACC,QAAQ;UAACC,GAAG,EAAExC;QAAY;UAAA+B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/E,CAAC,eACN1C,OAAA;QAAAoC,QAAA,gBACEpC,OAAA;UAAO2C,OAAO,EAAC,WAAW;UAAAP,QAAA,EAAC;QAAU;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC7C1C,OAAA;UAAO4C,IAAI,EAAC,KAAK;UAACC,EAAE,EAAC,WAAW;UAACC,IAAI,EAAC,WAAW;UAACC,QAAQ;UAACC,GAAG,EAAEvC;QAAa;UAAA8B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7E,CAAC,eACN1C,OAAA;QAAQ4C,IAAI,EAAC,QAAQ;QAAAR,QAAA,EAAC;MAAO;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC,eAEP1C,OAAA;MAAAuC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAEN1C,OAAA;MAAQiD,OAAO,EAAEtB,iBAAkB;MAACuB,KAAK,EAAE;QAACC,SAAS,EAAE;MAAM,CAAE;MAAAf,QAAA,EAAC;IAEhE;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA,eACT,CAAC;AAEP,CAAC;AAACrC,EAAA,CA3FID,QAAQ;AAAAgD,EAAA,GAARhD,QAAQ;AA6Fd,eAAeA,QAAQ;AAAC,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}